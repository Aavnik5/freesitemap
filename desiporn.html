<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Desi Video Player - FreePornX</title>
    <meta name="description" content="Watch latest viral Desi MMS, Bhabhi videos and Indian porn in HD. Free streaming on FreePornX.">
    <meta name="keywords" content="free porn videos xxx sex , free porn video desi, free porn xxx desi, desi porn videos,  free desi porn videos, free desi Bhabhi porn videos, free porn Indian sex videos, free India porn, videos, free porn viral desi videos, free viral desi porn videos, free porn videos xxx, free uncle aunty porn videos, free porn desi clips, free porn desi viral clips, free porn nude videos, porn xhamester, free porn xvideos, free xnxx porn videos, free porn stars videos , free porn viral clips, free porn videos Indian desi clips, free porn xxx sex videos, free porn videos, viral clips">
    <meta name="robots" content="index, follow">
    
    <link rel="canonical" href="https://freepornx.site/desiporn.html" />

    <meta property="og:site_name" content="FreePornX">
    <meta property="og:type" content="video.other">
    <meta property="og:title" content="Desi Viral Video">
    <meta property="og:description" content="Watch this video now on FreePornX.">
    <meta property="og:image" content="https://freepornx.site/cover.jpg">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; padding-top: 60px; padding-bottom: 70px; }
        .app-header { position: fixed; top: 0; left: 0; right: 0; background: rgba(0,0,0,0.9); z-index: 1000; padding-top: 10px; border-bottom: 1px solid #333; }
        .brand-logo { font-size: 18px; font-weight: 800; letter-spacing: 1px; }
        .player-wrapper { width: 100%; background: #000; position: sticky; top: 60px; z-index: 5; }
        .info-box { padding: 15px; background: #111; border-bottom: 1px solid #222; }
        .video-title { font-size: 16px; font-weight: 600; line-height: 1.3; margin-bottom: 10px; }
        
        /* TAGS STYLE */
        .tags-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .tag-pill { background: #333; color: #ccc; font-size: 11px; padding: 4px 10px; border-radius: 15px; text-decoration: none; border: 1px solid #444; }
        .tag-pill:hover { background: #dc3545; color: white; border-color: #dc3545; }

        .related-grid { display: flex; flex-direction: column; gap: 10px; padding: 10px; }
        .related-card { background: #222; border-radius: 6px; overflow: hidden; display: block; text-decoration: none; color: white; border: 1px solid #333; }
        .related-card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; }
        .related-info { padding: 8px; }
        .related-title { font-size: 11px; line-height: 1.3; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 60px; background: #000; border-top: 1px solid #222; display: flex; justify-content: space-around; align-items: center; z-index: 1001; }
        .nav-btn { color: #666; font-size: 10px; text-align: center; cursor: pointer; width: 16.6%; text-decoration: none; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .nav-btn.active { color: #dc3545; }
        .nav-btn i { font-size: 20px; margin-bottom: 4px; }
    </style>
</head>
<body>

    <noscript>
        <div style="padding: 20px; text-align: center;">
            <h1>Watch Latest Desi Videos</h1>
            <p>Please enable JavaScript to view this video.</p>
            <p>Check out our full list of videos:</p>
            <a href="sitemap_1.xml" style="color: #dc3545; font-size: 18px;">View Video Sitemap</a>
        </div>
    </noscript>

    <header class="app-header">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 15px;">
            <a class="brand-logo text-danger text-decoration-none m-0 p-0" href="index.html"><i class="fas fa-fire"></i> FreePornX</a>
            
            <div class="dropdown">
                <button class="btn btn-dark" type="button" id="menu-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end bg-dark" aria-labelledby="menu-toggle">
                    <li><a class="dropdown-item text-light" href="terms.html">Terms</a></li>
                    <li><a class="dropdown-item text-light" href="privacy.html">Privacy</a></li>
                    <li><a class="dropdown-item text-light" href="dmca.html">DMCA</a></li>
                    <li><a class="dropdown-item text-light" href="2257.html">2257 Compliance</a></li>
                    <li><a class="dropdown-item text-light" href="contact.html">Contact</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-light" href="faq.html">FAQ</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="player-wrapper" id="player-box">
        <div id="loader-msg" class="text-muted small">Loading Video Player...</div>
        <video id="player" playsinline controls style="width:100%; aspect-ratio: 16/9; display: none;" referrerpolicy="no-referrer"></video>
    </div>

    <div class="info-box">
        <h1 class="video-title" id="video-title">Loading Video Details...</h1>
        <div class="d-flex justify-content-end gap-3 text-white small mb-2">
            <span onclick="downloadVideo()" style="cursor:pointer;"><i class="fas fa-download"></i> Download</span>
            <span onclick="shareVideo()" style="cursor:pointer;"><i class="fas fa-share-alt"></i> Share</span>
        </div>
        <div id="video-tags" class="tags-container"></div>
    </div>

    <div class="container mt-2">
        <h6 class="text-white ps-2 mb-3 border-start border-4 border-danger ps-2">Related Videos</h6>
        <div class="related-grid" id="related-container">
            <div class="text-muted small w-100 text-center">Loading related content...</div>
        </div>
    </div>

    <div class="bottom-nav">
        <a href="index.html?tab=shorts" class="nav-btn"><i class="fas fa-play-circle"></i><span>Shorts</span></a>
        <a href="index.html?tab=video" class="nav-btn"><i class="fas fa-video"></i><span>Video</span></a>
        <a href="index.html?tab=pics" class="nav-btn"><i class="fas fa-images"></i><span>Pics</span></a>
        <a href="index.html?tab=comics" class="nav-btn"><i class="fas fa-book-open"></i><span>Comics</span></a>
        <a href="index.html?tab=gifs" class="nav-btn"><i class="fas fa-magic"></i><span>Gifs</span></a>
        <a href="index.html?tab=desi" class="nav-btn active"><i class="fas fa-fire"></i><span>Desi</span></a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    
    <script type="application/ld+json" id="video-schema">
    {
      "@context": "https://schema.org",
      "@type": "VideoObject",
      "name": "Desi Video",
      "description": "Watch free desi video online.",
      "thumbnailUrl": "https://freepornx.site/cover.jpg",
      "uploadDate": "2024-01-01"
    }
    </script>

    <script>
        // üî¥ REPLACE WITH YOUR WORKER URL
        const API_WORKER = "https://desitales-scraper.slayeranika.workers.dev"; 
        
        const urlParams = new URLSearchParams(window.location.search);
        
        // üõ†Ô∏è UPDATED LOGIC: Handle both 'v' and 'url'
        let paramVal = urlParams.get('v') || urlParams.get('url');
        let videoPageUrl = "";

        if (paramVal) {
            // Agar value 'http' se start nahi hoti, matlab wo encoded path hai
            if (!paramVal.startsWith('http')) {
                videoPageUrl = `https://spankbang.com/${decodeURIComponent(paramVal)}`;
            } else {
                videoPageUrl = paramVal;
            }
        }

        let currentStreamUrl = null;

        if (!videoPageUrl) window.location.href = "index.html?tab=desi";

        async function loadVideo() {
            try {
                const api = `${API_WORKER}/video-details?url=${encodeURIComponent(videoPageUrl)}`;
                const res = await fetch(api);
                if (!res.ok) throw new Error("Network Error");
                const data = await res.json();

                if (!data.success) throw new Error(data.error || "Failed to load");

                // 1. UPDATE UI
                document.getElementById('loader-msg').style.display = 'none';
                document.getElementById('player').style.display = 'block';

                currentStreamUrl = data.stream_url;
                
                // Handle views directly from worker
                let displayViews = data.views || "Hot";
                
                // Handle Duration directly from worker
                let displayDuration = data.duration || "HD";

                document.getElementById('video-title').innerHTML = `
                    ${data.title} <br>
                    <small class="text-light" style="font-size: 12px; opacity: 0.9;">
                        <i class="fas fa-clock"></i> ${displayDuration} &nbsp;&bull;&nbsp; 
                        <i class="fas fa-eye"></i> ${displayViews}
                    </small>
                `;

                updatePageSEO(data); // üü¢ Call SEO Function

                // üõ†Ô∏è QUALITY SELECTOR LOGIC
                const video = document.getElementById('player');
                const plyrSources = [];
                const qualityOptions = [];

                if (data.streams) {
                    // Map streams to Plyr format
                    // Key format in Worker: '720p', '480p' etc.
                    for (const [key, url] of Object.entries(data.streams)) {
                        if (key === 'default') continue;
                        
                        // Convert '720p' -> 720 (integer)
                        const size = parseInt(key.replace('p', '').replace('4k', '2160'));
                        if (!isNaN(size)) {
                            plyrSources.push({
                                src: url,
                                type: 'video/mp4',
                                size: size
                            });
                            qualityOptions.push(size);
                        }
                    }
                }

                // If streams logic fails, use default fallback
                if (plyrSources.length === 0 && data.stream_url) {
                    plyrSources.push({
                        src: data.stream_url,
                        type: 'video/mp4',
                        size: 720 // Fake size for default
                    });
                    qualityOptions.push(720);
                }

                if (plyrSources.length > 0) {
                    // Sort Highest to Lowest
                    plyrSources.sort((a, b) => b.size - a.size);
                    qualityOptions.sort((a, b) => b - a);

                    const player = new Plyr(video, { 
                        autoplay: true,
                        controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'fullscreen'],
                        settings: ['quality', 'speed'],
                        quality: {
                            default: 720, // Try to start at 720p
                            options: qualityOptions,
                            forced: true,
                            onChange: (e) => console.log(e)
                        }
                    });

                    player.source = {
                        type: 'video',
                        title: data.title,
                        sources: plyrSources
                    };
                } else {
                    document.getElementById('player-box').innerHTML = '<div class="p-5 text-center text-danger">Stream Not Found</div>';
                }

                // 2. Render Tags
                const tagsBox = document.getElementById('video-tags');
                if (data.tags && data.tags.length > 0) {
                    tagsBox.innerHTML = data.tags.map(tag => `<span class="tag-pill">#${tag}</span>`).join('');
                } else {
                    tagsBox.style.display = 'none';
                }

                // 3. Render Related Videos
                const grid = document.getElementById('related-container');
                if(data.related_videos && data.related_videos.length > 0){
                    grid.innerHTML = data.related_videos.map(v => {
                        // Relative link for related videos
                        let relLink = v.video_page_url;
                        if(relLink.includes('spankbang.com')) {
                            const clean = relLink.replace("https://spankbang.com/", "").replace(/\/$/, "");
                            relLink = `desiporn.html?v=${encodeURIComponent(clean)}`;
                        }

                        return `
                        <a href="${relLink}" class="related-card">
                            <div style="position:relative;">
                                <img src="${API_WORKER}/proxy?url=${encodeURIComponent(v.thumbnail)}" loading="lazy" alt="${v.title}">
                            </div>
                            <div class="related-info"><div class="related-title">${v.title}</div></div>
                        </a>
                    `}).join('');
                } else {
                    grid.innerHTML = '<div class="text-muted small">No related videos found.</div>';
                }

            } catch (e) {
                console.error(e);
                document.getElementById('video-title').innerText = "Error loading content";
            }
        }

        // üü¢ SEO FUNCTION: Updates Metadata & JSON-LD
        function updatePageSEO(data) {
            const fullKeywords = "free porn videos xxx sex, free porn video desi, free porn xxx desi, desi porn videos, free desi porn videos, free desi Bhabhi porn videos, free porn Indian sex videos, free India porn, videos, free porn viral desi videos, free viral desi porn videos, free porn videos xxx, free uncle aunty porn videos, free porn desi clips, free porn desi viral clips, free porn nude videos, porn xhamester, free porn xvideos, free xnxx porn videos, free porn stars videos, free porn viral clips, free porn videos Indian desi clips, free porn xxx sex videos, free porn videos, viral clips";
            
            // Generate Random Description
            const keywordArray = fullKeywords.split(',').map(s => s.trim());
            const shuffled = keywordArray.sort(() => 0.5 - Math.random());
            const selectedKeywords = shuffled.slice(0, 15).join(', ');
            const randomDescription = `Watch ${data.title} free. ${selectedKeywords}. Enjoy full HD content on FreePornX.`;

            // Update Title
            document.title = data.title + " - FreePornX";
            
            // Update Meta Description
            const metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc) metaDesc.setAttribute("content", randomDescription);

            // Update Keywords Tag
            const metaKeys = document.querySelector('meta[name="keywords"]');
            if (metaKeys) {
                const combinedKeywords = (data.tags ? data.tags.join(", ") + ", " : "") + fullKeywords;
                metaKeys.setAttribute("content", combinedKeywords);
            }

            // Update OpenGraph
            const ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.setAttribute("content", `Watch ${data.title} on FreePornX - Free Porn Videos XXX Sex`);
            
            const ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.setAttribute("content", randomDescription);

            const ogImage = document.querySelector('meta[property="og:image"]');
            if (ogImage && data.thumbnail) ogImage.setAttribute("content", data.thumbnail);

            // üü¢ JSON-LD SCHEMA FOR GOOGLE
            const schemaScript = document.getElementById('video-schema');
            const schemaData = {
                "@context": "https://schema.org",
                "@type": "VideoObject",
                "name": data.title,
                "description": randomDescription,
                "thumbnailUrl": data.thumbnail || "https://freepornx.site/cover-adult.jpg",
                "uploadDate": new Date().toISOString(),
                "contentUrl": data.stream_url || "",
                "embedUrl": window.location.href,
                "duration": data.duration || "PT5M"
            };
            schemaScript.textContent = JSON.stringify(schemaData);
        }

        async function shareVideo() {
            const title = document.getElementById('video-title').innerText;
            const url = window.location.href;
            if (navigator.share) {
                try {
                    await navigator.share({ title: title, text: `Watch ${title} on FreePornX`, url: url });
                } catch (err) { console.error("Share failed:", err); }
            } else {
                try {
                    await navigator.clipboard.writeText(url);
                    alert("Link copied to clipboard!");
                } catch (err) { alert("Could not copy link."); }
            }
        }

        function downloadVideo() {
            if (!currentStreamUrl) {
                alert("Download link not ready yet.");
                return;
            }
            const a = document.createElement('a');
            a.href = currentStreamUrl;
            a.download = document.getElementById('video-title').innerText + ".mp4";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        loadVideo();
    </script>
</body>
</html>